def calculate_discount(price, discount_rate):
    """
    Function: Calculate discount given price and discount rate

    Parameters:
    price(float): If price is not of int, float, or str, return error
    price < 0: If price not greater than 0, return error


    Variables:
    price = float(price)
    discount_rate = price * discount_rate
    discount_amount = price * discount_rate

    Logic:
        Price:
        1. Verify of type that can mathematically calculated
        2. Verify amount that can be applied through discount

        Discount amount:
        1. Verify discount amount is calculated

    Return:
    Discount Amount
        or
    TypeError, ValueError
    """
    try:
        #Error message for incorrect input in Price
        if not isinstance(price, (int, float, str)):
            raise TypeError("Price must be a number or a numeric string.")

        # Convert to float
        price = float(price)

        #Error if negative value in price table
        if price < 0:
            raise ValueError("Price cannot be negative.")

        # Calculate the discount amount
        discount_amount = price * discount_rate
        return discount_amount

    #Error message for calculation error in discount calculation.
    except (TypeError, ValueError) as e:
        print(f"ERROR in calculate_discount: {e}")
        return None


def apply_discount(price, discount_amount):
    """
    Parameters:
    Discount amount must be "Non-Error"

    Variables:
    new_price = price - discount_amount

    Logic:
    Verify discount_amount is of type "Non-Error"

    Return:
    new_price
    """
    #Error if discount amount not input correctly
    if discount_amount is None:
        print("Cannot apply discount due to invalid discount amount.")
        return None

    new_price = price - discount_amount
    return new_price


def main():
    """
    Parameters:
    Verify final_price is calculated

    Variables:
    Product Table - List
    Final_price = apply_discount(price, discount_amount)

    Logic:
    1. Verify calculation
        a. Return prices
        b. Return error

    Return:
    None
    """

    products = [
        {"name": "Laptop", "price": 1000, "discount_rate": 0.1},
        {"name": "Smartphone", "price": 800, "discount_rate": 0.15},
        {"name": "Tablet", "price": 500, "discount_rate": 0.2},
        {"name": "Headphones", "price": 200, "discount_rate": 0.05},
    ]

    for product in products:
        price = product["price"]
        discount_rate = product["discount_rate"]

        discount_amount = calculate_discount(price, discount_rate)
        final_price = apply_discount(price, discount_amount)

        #Print table if all value inputs are of the correct type
        if final_price is not None:
            print(f"Product: {product['name']}")
            print(f"Original Price: ${price}")
            print(f"Discount Amount: ${discount_amount}")
            print(f"Final Price: ${final_price}")
            print()
        else:
            print(f"Skipping {product['name']} due to invalid input.\n")


if __name__ == "__main__":
    main()
